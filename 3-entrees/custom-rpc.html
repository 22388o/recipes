<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Custom RPCs - Substrate Recipes</title>
        

        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="A Hands-On Cookbook for Aspiring Blockchain Chefs">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="shortcut icon" href="../favicon.png">
        <link rel="stylesheet" href="../css/variables.css">
        <link rel="stylesheet" href="../css/general.css">
        <link rel="stylesheet" href="../css/chrome.css">
        <link rel="stylesheet" href="../css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="../FontAwesome/css/font-awesome.css">
        <link href="https://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800" rel="stylesheet" type="text/css">
        <link href="https://fonts.googleapis.com/css?family=Source+Code+Pro:500" rel="stylesheet" type="text/css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="../highlight.css">
        <link rel="stylesheet" href="../tomorrow-night.css">
        <link rel="stylesheet" href="../ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        

        
    </head>
    <body>
        <!-- Provide site root to javascript -->
        <script type="text/javascript">
            var path_to_root = "../";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "light" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script type="text/javascript">
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div id="sidebar-scrollbox" class="sidebar-scrollbox">
                <ol class="chapter"><li class="expanded affix "><a href="../introduction.html">Introduction</a></li><li class="expanded "><a href="../1-prepare-kitchen/index.html"><strong aria-hidden="true">1.</strong> Preparing Your Kitchen</a></li><li><ol class="section"><li class="expanded "><a href="../1-prepare-kitchen/1-build-node.html"><strong aria-hidden="true">1.1.</strong> Building A Node</a></li><li class="expanded "><a href="../1-prepare-kitchen/2-interact-node.html"><strong aria-hidden="true">1.2.</strong> Interacting with a Node</a></li><li class="expanded "><a href="../1-prepare-kitchen/3-kitchen-organization.html"><strong aria-hidden="true">1.3.</strong> Kitchen Organization</a></li></ol></li><li class="expanded "><a href="../2-appetizers/index.html"><strong aria-hidden="true">2.</strong> Appetizers</a></li><li><ol class="section"><li class="expanded "><a href="../2-appetizers/1-hello-substrate.html"><strong aria-hidden="true">2.1.</strong> Hello Substrate</a></li><li class="expanded "><a href="../2-appetizers/2-storage-values.html"><strong aria-hidden="true">2.2.</strong> Single Value Storage</a></li><li class="expanded "><a href="../2-appetizers/3-errors.html"><strong aria-hidden="true">2.3.</strong> Handling Errors</a></li><li class="expanded "><a href="../2-appetizers/4-events.html"><strong aria-hidden="true">2.4.</strong> Events Verify Execution</a></li></ol></li><li class="expanded "><a href="../3-entrees/index.html"><strong aria-hidden="true">3.</strong> Entrees</a></li><li><ol class="section"><li class="expanded "><a href="../3-entrees/storage-api/index.html"><strong aria-hidden="true">3.1.</strong> Runtime Storage API</a></li><li><ol class="section"><li class="expanded "><a href="../3-entrees/storage-api/cache.html"><strong aria-hidden="true">3.1.1.</strong> Cache Locally &gt; Storage Calls</a></li><li class="expanded "><a href="../3-entrees/storage-api/sets-vecs-iteration.html"><strong aria-hidden="true">3.1.2.</strong> Sets, Vectors, Iteration</a></li><li class="expanded "><a href="../3-entrees/storage-api/enumerated.html"><strong aria-hidden="true">3.1.3.</strong> Ordered Lists: Maps, Linked Maps</a></li><li class="expanded "><a href="../3-entrees/storage-api/double.html"><strong aria-hidden="true">3.1.4.</strong> Subgroup Removal by Subkey: Double Maps</a></li><li class="expanded "><a href="../3-entrees/storage-api/childtries.html"><strong aria-hidden="true">3.1.5.</strong> Efficient Subgroup Removal by Subkey: Child Tries</a></li><li class="expanded "><a href="../3-entrees/storage-api/structs.html"><strong aria-hidden="true">3.1.6.</strong> Storing custom structs</a></li><li class="expanded "><a href="../3-entrees/storage-api/ringbuffer.html"><strong aria-hidden="true">3.1.7.</strong> Ringbuffer Queue</a></li></ol></li><li class="expanded "><a href="../3-entrees/basic-token.html"><strong aria-hidden="true">3.2.</strong> Basic Token</a></li><li class="expanded "><a href="../3-entrees/constants.html"><strong aria-hidden="true">3.3.</strong> Configurable Constants</a></li><li class="expanded "><a href="../3-entrees/instantiable.html"><strong aria-hidden="true">3.4.</strong> Instantiable Pallets</a></li><li class="expanded "><a href="../3-entrees/weights.html"><strong aria-hidden="true">3.5.</strong> Weights for Resource Accounting</a></li><li class="expanded "><a href="../3-entrees/fees.html"><strong aria-hidden="true">3.6.</strong> Transaction Fees for Economic Security</a></li><li class="expanded "><a href="../3-entrees/charity.html"><strong aria-hidden="true">3.7.</strong> Charity and Imbalances</a></li><li class="expanded "><a href="../3-entrees/fixed-point.html"><strong aria-hidden="true">3.8.</strong> Fixed Point Arithmetic</a></li><li class="expanded "><a href="../3-entrees/off-chain-workers.html"><strong aria-hidden="true">3.9.</strong> Off-chain Workers</a></li><li class="expanded "><a href="../3-entrees/runtime-api.html"><strong aria-hidden="true">3.10.</strong> Runtime APIs</a></li><li class="expanded "><a href="../3-entrees/custom-rpc.html" class="active"><strong aria-hidden="true">3.11.</strong> Custom RPCs</a></li><li class="expanded "><a href="../3-entrees/basic-pow.html"><strong aria-hidden="true">3.12.</strong> Basic Proof of Work</a></li><li class="expanded "><a href="../3-entrees/currency.html"><strong aria-hidden="true">3.13.</strong> Currency Types</a></li><li class="expanded "><a href="../3-entrees/randomness.html"><strong aria-hidden="true">3.14.</strong> Generating Randomness</a></li><li class="expanded "><a href="../3-entrees/execution-schedule.html"><strong aria-hidden="true">3.15.</strong> Execution Schedule</a></li><li class="expanded "><a href="../3-entrees/permissioned-methods.html"><strong aria-hidden="true">3.16.</strong> Permissioned Methods</a></li><li class="expanded "><a href="../3-entrees/testing/index.html"><strong aria-hidden="true">3.17.</strong> Testing</a></li><li><ol class="section"><li class="expanded "><a href="../3-entrees/testing/mock.html"><strong aria-hidden="true">3.17.1.</strong> Basic Test Environments</a></li><li class="expanded "><a href="../3-entrees/testing/common.html"><strong aria-hidden="true">3.17.2.</strong> Common Tests</a></li><li class="expanded "><a href="../3-entrees/testing/off-chain-workers.html"><strong aria-hidden="true">3.17.3.</strong> Off-chain Worker Test Environment</a></li><li class="expanded "><a href="../3-entrees/testing/externalities.html"><strong aria-hidden="true">3.17.4.</strong> Custom Test Environment</a></li></ol></li><li class="expanded "><a href="../3-entrees/safemath.html"><strong aria-hidden="true">3.18.</strong> Safe Math</a></li><li class="spacer"></li></ol></li><li class="expanded "><a href="../more-resources.html">More Resources</a></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                
                <div id="menu-bar" class="menu-bar">
                    <div id="menu-bar-sticky-container">
                        <div class="left-buttons">
                            <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                                <i class="fa fa-bars"></i>
                            </button>
                            <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                                <i class="fa fa-paint-brush"></i>
                            </button>
                            <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                                <li role="none"><button role="menuitem" class="theme" id="light">Light (default)</button></li>
                                <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                                <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                                <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                                <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                            </ul>
                            
                            <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                                <i class="fa fa-search"></i>
                            </button>
                            
                        </div>

                        <h1 class="menu-title">Substrate Recipes</h1>

                        <div class="right-buttons">
                            <a href="../print.html" title="Print this book" aria-label="Print this book">
                                <i id="print-button" class="fa fa-print"></i>
                            </a>
                            
                        </div>
                    </div>
                </div>

                
                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" name="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>
                

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script type="text/javascript">
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1><a class="header" href="#custom-rpcs" id="custom-rpcs">Custom RPCs</a></h1>
<p><em><a href="https://github.com/substrate-developer-hub/recipes/tree/master/nodes/rpc-node"><code>nodes/rpc-node</code></a></em>
<em><a href="https://github.com/substrate-developer-hub/recipes/tree/master/runtimes/api-runtime"><code>runtime/api-runtime</code></a></em></p>
<p>Remote Procedure Calls, or RPCs, are a way for an external program (eg. a frontend) to communicate with a Substrate node. They are used for checking storage values, submitting transactions, and querying the current consensus authorities. Substrate comes with several <a href="https://polkadot.js.org/api/substrate/rpc.html">default RPCs</a>. In many cases it is useful to add custom RPCs to your node. In this recipe, we will add two custom RPCs to our node, one of which calls into a <a href="./runtime-api.html">custom runtime API</a>.</p>
<h2><a class="header" href="#defining-an-rpc" id="defining-an-rpc">Defining an RPC</a></h2>
<p>Every RPC that the node will use must be defined in a trait. We'll begin by defining a simple RPC
called &quot;silly rpc&quot; which just returns constant integers. A Hello world of sorts. In the <code>nodes/rpc-node/src/silly_rpc.rs</code> file, we define a basic rpc as</p>
<pre><pre class="playpen"><code class="language-rust">
<span class="boring">#![allow(unused_variables)]
</span><span class="boring">fn main() {
</span>#[rpc]
pub trait SillyRpc {
    #[rpc(name = &quot;silly_seven&quot;)]
    fn silly_7(&amp;self) -&gt; Result&lt;u64&gt;;

    #[rpc(name = &quot;silly_double&quot;)]
    fn silly_double(&amp;self, val: u64) -&gt; Result&lt;u64&gt;;
}
<span class="boring">}
</span></code></pre></pre>
<p>This definition defines two RPC methods called <code>hello_five</code> and <code>hello_seven</code>. Each RPC method must take a <code>&amp;self</code> reference and must return a <code>Result</code>. Next, we define a struct that implements this trait.</p>
<pre><pre class="playpen"><code class="language-rust">
<span class="boring">#![allow(unused_variables)]
</span><span class="boring">fn main() {
</span>pub struct Silly;

impl SillyRpc for Silly {
    fn silly_7(&amp;self) -&gt; Result&lt;u64&gt; {
        Ok(7)
    }

    fn silly_double(&amp;self, val: u64) -&gt; Result&lt;u64&gt; {
        Ok(2 * val)
    }
}
<span class="boring">}
</span></code></pre></pre>
<p>Finally, to make the contents of this new files visible, we need to add a line in our <code>main.rs</code>.</p>
<pre><pre class="playpen"><code class="language-rust">
<span class="boring">#![allow(unused_variables)]
</span><span class="boring">fn main() {
</span>mod silly_rpc;
<span class="boring">}
</span></code></pre></pre>
<h2><a class="header" href="#including-the-rpc" id="including-the-rpc">Including the RPC</a></h2>
<p>With our RPC written, we're ready to install it on our node. We begin with a few dependencies in our <code>rpc-node</code>'s <code>Cargo.toml</code>.</p>
<pre><code class="language-toml">jsonrpc-core = &quot;14.0.3&quot;
jsonrpc-core-client = &quot;14.0.3&quot;
jsonrpc-derive = &quot;14.0.3&quot;
sc-rpc = { git = 'https://github.com/paritytech/substrate.git', tag = 'v2.0.0-alpha.3' }
</code></pre>
<p>Next, in our <code>rpc-node</code>'s <code>service.rs</code> file, we extend the service with our RPC. We've chosen to install this RPC for full nodes, so we've included the code in the <code>new_full_start!</code> macro. You could also install the RPC on a light client by making the corresponding changes to <code>new_light</code>.</p>
<p>The first change to this macro is a simple type definition</p>
<pre><pre class="playpen"><code class="language-rust">
<span class="boring">#![allow(unused_variables)]
</span><span class="boring">fn main() {
</span>type RpcExtension = jsonrpc_core::IoHandler&lt;sc_rpc::Metadata&gt;;
<span class="boring">}
</span></code></pre></pre>
<p>Then, once you've called the service builder, you can extend it with an RPC by using its <code>with_rpc_extensions</code> method as follows.</p>
<pre><pre class="playpen"><code class="language-rust">
<span class="boring">#![allow(unused_variables)]
</span><span class="boring">fn main() {
</span>.with_rpc_extensions(|client, _pool, _backend, _fetcher, _remote_blockchain| -&gt; Result&lt;RpcExtension, _&gt; {
  let mut io = jsonrpc_core::IoHandler::default();

  // Use the fully qualified name starting from `crate` because we're in macro_rules!
  io.extend_with(crate::silly_rpc::SillyRpc::to_delegate(crate::silly_rpc::Silly{}));

  Ok(io)
})
<span class="boring">}
</span></code></pre></pre>
<h2><a class="header" href="#calling-the-rpc" id="calling-the-rpc">Calling the RPC</a></h2>
<p>Once your node is running, you can test the RPC by calling it with any client that speaks json RPC. One widely available option <code>curl</code>.</p>
<pre><code class="language-bash">$ curl http://localhost:9933 -H &quot;Content-Type:application/json;charset=utf-8&quot; -d   '{
     &quot;jsonrpc&quot;:&quot;2.0&quot;,
      &quot;id&quot;:1,
      &quot;method&quot;:&quot;silly_seven&quot;,
      &quot;params&quot;: []
    }'
</code></pre>
<p>To which the RPC responds</p>
<pre><code>{&quot;jsonrpc&quot;:&quot;2.0&quot;,&quot;result&quot;:7,&quot;id&quot;:1}
</code></pre>
<p>You may have noticed that our second RPC takes a parameter, the value to double. You can supply this parameter by including its in the  <code>params</code> list. For example:</p>
<pre><code class="language-bash">$ curl http://localhost:9933 -H &quot;Content-Type:application/json;charset=utf-8&quot; -d   '{
     &quot;jsonrpc&quot;:&quot;2.0&quot;,
      &quot;id&quot;:1,
      &quot;method&quot;:&quot;silly_double&quot;,
      &quot;params&quot;: [7]
    }'
</code></pre>
<p>To which the RPC responds with the doubled parameter</p>
<pre><code>{&quot;jsonrpc&quot;:&quot;2.0&quot;,&quot;result&quot;:14,&quot;id&quot;:1}
</code></pre>
<h2><a class="header" href="#rpc-to-call-a-runtime-api" id="rpc-to-call-a-runtime-api">RPC to Call a Runtime API</a></h2>
<p>The silly RPC demonstrates the fundamentals of working with RPCs in Substrate. Nonetheless, most RPCs will go beyond what we've learned so far, and actually interact with other parts of the node. In this second example, we will include an RPC that calls into the <code>sum-storage</code> runtime API from the <a href="./runtime-api.html">runtime API recipe</a>. While it isn't strictly necessary to understand what the runtime API does, reading that recipe may provide helpful context.</p>
<p>Because this RPC's behavior is closely related to a specific pallet, we've chosen to define the RPC in the pallet's directory. In this case the RPC is defined in <code>pallets/sum-storage/rpc</code>. So rather than using the <code>mod</code> keyword as we did before, we must include this RPC definition in the node's <code>Cargo.toml</code> file.</p>
<pre><code class="language-toml">sum-storage-rpc = { path = &quot;../../pallets/sum-storage/rpc&quot; }
</code></pre>
<p>Defining the RPC interface is similar to before, but there are a few differences worth noting. First, the struct that implements the RPC needs a reference to the <code>client</code>. This is necessary so we can actually call into the runtime. Second the struct is generic over the <code>BlockHash</code> type. This is because it will call a runtime API, and runtime APIs must always be called at a specific block.</p>
<pre><pre class="playpen"><code class="language-rust">
<span class="boring">#![allow(unused_variables)]
</span><span class="boring">fn main() {
</span>#[rpc]
pub trait SumStorageApi&lt;BlockHash&gt; {
	#[rpc(name = &quot;sumStorage_getSum&quot;)]
	fn get_sum(
		&amp;self,
		at: Option&lt;BlockHash&gt;
	) -&gt; Result&lt;u32&gt;;
}

/// A struct that implements the `SumStorageApi`.
pub struct SumStorage&lt;C, M&gt; {
	client: Arc&lt;C&gt;,
	_marker: std::marker::PhantomData&lt;M&gt;,
}

impl&lt;C, M&gt; SumStorage&lt;C, M&gt; {
	/// Create new `SumStorage` instance with the given reference to the client.
	pub fn new(client: Arc&lt;C&gt;) -&gt; Self {
		Self { client, _marker: Default::default() }
	}
}
<span class="boring">}
</span></code></pre></pre>
<p>The RPC's implementation is also similar to before. The additional syntax here is related to calling the runtime at a specific block, as well as ensuring that the runtime we're calling actually has the correct runtime API available.</p>
<pre><pre class="playpen"><code class="language-rust">
<span class="boring">#![allow(unused_variables)]
</span><span class="boring">fn main() {
</span>impl&lt;C, Block&gt; SumStorageApi&lt;&lt;Block as BlockT&gt;::Hash&gt;
	for SumStorage&lt;C, Block&gt;
where
	Block: BlockT,
	C: Send + Sync + 'static,
	C: ProvideRuntimeApi,
	C: HeaderBackend&lt;Block&gt;,
	C::Api: SumStorageRuntimeApi&lt;Block&gt;,
{
	fn get_sum(
		&amp;self,
		at: Option&lt;&lt;Block as BlockT&gt;::Hash&gt;
	) -&gt; Result&lt;u32&gt; {

		let api = self.client.runtime_api();
		let at = BlockId::hash(at.unwrap_or_else(||
			// If the block hash is not supplied assume the best block.
			self.client.info().best_hash
		));

		let runtime_api_result = api.get_sum(&amp;at);
		runtime_api_result.map_err(|e| RpcError {
			code: ErrorCode::ServerError(9876), // No real reason for this value
			message: &quot;Something wrong&quot;.into(),
			data: Some(format!(&quot;{:?}&quot;, e).into()),
		})
	}
}
<span class="boring">}
</span></code></pre></pre>
<p>Finally, to install this RPC on in our service, we expand the existing <code>with_rpc_extensions</code> call to</p>
<pre><pre class="playpen"><code class="language-rust">
<span class="boring">#![allow(unused_variables)]
</span><span class="boring">fn main() {
</span>.with_rpc_extensions(|client, _pool, _backend, _fetcher, _remote_blockchain| -&gt; Result&lt;RpcExtension, _&gt; {
  let mut io = jsonrpc_core::IoHandler::default();

  // Use the fully qualified name starting from `crate` because we're in macro_rules!
  io.extend_with(crate::silly_rpc::SillyRpc::to_delegate(crate::silly_rpc::Silly{}));

  io.extend_with(sum_storage_rpc::SumStorageApi::to_delegate(sum_storage_rpc::SumStorage::new(client)));

  Ok(io)
})?
<span class="boring">}
</span></code></pre></pre>
<h2><a class="header" href="#optional-rpc-parameters" id="optional-rpc-parameters">Optional RPC Parameters</a></h2>
<p>This RPC takes a parameter ,<code>at</code>, whose type is <code>Option&lt;_&gt;</code>. We may call this RPC by omitting the optional parameter entirely. In this case the implementation provides a default value of the best block.</p>
<pre><code class="language-bash">$ curl http://localhost:9933 -H &quot;Content-Type:application/json;charset=utf-8&quot; -d   '{
     &quot;jsonrpc&quot;:&quot;2.0&quot;,
      &quot;id&quot;:1,
      &quot;method&quot;:&quot;sumStorage_getSum&quot;,
      &quot;params&quot;: []
    }'
</code></pre>
<p>We may also call the RPC by providing a block hash. One easy way to get a block hash to test this call is by copying it from the logs of a running node.</p>
<pre><code class="language-bash">$ curl http://localhost:9933 -H &quot;Content-Type:application/json;charset=utf-8&quot; -d   '{
     &quot;jsonrpc&quot;:&quot;2.0&quot;,
      &quot;id&quot;:1,
      &quot;method&quot;:&quot;sumStorage_getSum&quot;,
      &quot;params&quot;: [&quot;0x87b2e4b93e74d2f06a0bde8de78c9e2a9823ce559eb5e3c4710de40a1c1071ac&quot;]
    }'
</code></pre>
<p>As an exercise, you should change the storage values, and confirm that the RPC provides the correct updated sum. Then call the RPC at an old block and confirm you get the old sum.</p>
<h2><a class="header" href="#polkadot-js-api" id="polkadot-js-api">Polkadot JS API</a></h2>
<p>Many frontends interact with Substrate nodes through Polkadot JS API. While the recipes does not strive to document that project, we have included a snippet of javascript for interacting with these custom RPCs in the <code>nodes/rpc-node/js</code> directory.</p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                        
                            <a rel="prev" href="../3-entrees/runtime-api.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>
                        

                        
                            <a rel="next" href="../3-entrees/basic-pow.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>
                        

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                
                    <a href="../3-entrees/runtime-api.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>
                

                
                    <a href="../3-entrees/basic-pow.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
                
            </nav>

        </div>

        

        

        
        
        
        <script type="text/javascript">
            window.playpen_copyable = true;
        </script>
        

        

        
        <script src="../elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../mark.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../searcher.js" type="text/javascript" charset="utf-8"></script>
        

        <script src="../clipboard.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../highlight.js" type="text/javascript" charset="utf-8"></script>
        <script src="../book.js" type="text/javascript" charset="utf-8"></script>

        <!-- Custom JS scripts -->
        
        <script type="text/javascript" src="../.analytics/load.js"></script>
        
        <script type="text/javascript" src="../.analytics/config.js"></script>
        
        <script type="text/javascript" src="../.analytics/klaro.min.js"></script>
        

        

    </body>
</html>
